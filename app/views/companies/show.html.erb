<p> Goals for this page is to allow a user to favoite/follow the page </p>
<p> Goals for this page is to allow a user to comment on the page </p>
<p> Goals for this page is to allow a user to add the company to a list they have </p>
<p> Goals for this page is to see the location based off Google Maps api </p>

<%# Displays company title %>
<h1>Company NAME: <%= @company.title %></h1>

<%# Displays company description %>
<p>Content: <%= @company.description %></p>

<%# Displays company comment count %>
<h5>Comments count: <%= @company.comments.count %></h5>
<%# Displays company favorite count %>
<h5>Favorites count: <%= @company.favorites.count %></h5>

<%# Displays comments from user %>
Comments:
  <% @company.comments.each do |comment| %>
  <br>
    <%= link_to comment.user.username, user_path(comment.user) %> said
    <%= comment.content %>
  <% end %>


<br><br>
Favorited/followed by:
  <% @company.favorites.each do |favorite| %>
  <br>
    <%= link_to favorite.user.username, user_path(favorite.user) %> loved
     ❤️
  <% end %>

<%# commented out  %>
 <%if false %>
<%= form_for @company do |f| %>
  <%= f.collection_select :list_ids , List.all, :id, :name %>
  <%= f.hidden_field :company_id, :value => @company.id %>
  <%= f.submit %>
<% end %>

<%= form_for @company do |f| %>
  <%= f.collection_select :list_ids , List.all, :id, :name %>
  <%= f.submit %>
<% end %>

 <%end %>

<%# Adds a company to list %>
<br><br>
 Add to list:
<%= form_for CompanyList.new do |f| %>
  <%= f.collection_select :list_id , List.all, :id, :name %>
  <%= f.hidden_field :company_id, value: @company.id %>
  <%= f.submit "Add to your list" %>
<% end %>

<%# Shows commentors username but not the content %>
<br><br>
Commentors:
<ul>
<% @company.users.distinct.each do |user| %>
  <li>
    <%= link_to user.username, user_path(user) %>
  </li>
<% end %>
</ul>


<br><br>
<p> add a comment </p>
<%= form_for @company.comments.build do |f| %>
  <%= f.hidden_field :company_id %>
  <p>
    <%= f.collection_select :user_id, User.all, :id, :username %>
  </p>  
  <p>
    <%= f.label :content, "New Comment" %><br>
    <%= f.text_area :content %>
  </p>
  <br/>
  <%= f.submit %>
<% end %>



<%#working on favorites%>
<%#u2.favorites.create(:liked => true, :company_id => 1)%>

<br><br>
 favorite this company:
<%= form_for Favorite.new do |f| %>
  <%# f.collection_select :favorite_id , Favorite.all, :id, :liked %>
  <%# f.hidden_field :user_id, value: user.id %>
  <%=f.hidden_field :user_id, value: 7 %>
  <%=f.hidden_field :company_id, value: @company.id %>
  <%= f.submit "Favorite this company" %>
<% end %>
